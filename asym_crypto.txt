-------------------------------------------

Основы Шифрования - Asymmetric Cryptography

-------------------------------------------

Защита передаваемой по сети информации обеспечивается посредством ее шифрования.

Это делается с помощью пары ключей шифрования:

- private key:

Остается у владельца пары, расшифровывает сообщения зашифрованные публичным ключем;

- public key:

Передается респондентам для шифрования передаваемых ими сообщений владельцу пары ключей.

Создание SSH ключей:

--------------------

...

ssh-keygen -t rsa -b 4096 -m PEM -f cryptoKey

...

где:

-t Тип клча

-b Количество байтов в создаваемом ключе. Чем их больше, тем более стойким является ключ.

Некоторые типы ключей имеют фиксированную длину и не меняют при использовании опции -b;

-m формат ключа для параметров преобразования при импрте (-i) и экспорте (-e);

PEM и PKCS8 - форматы открытых ключей;

-f имя ключа шифрования.

Проверить шифрование файла можно утилитой openssh, но она не понимает формат ключа PEM.

Поэтому, предварительно,

поменяем формат публичного ключа на PKCS8:

------------------------------------------

...

ssh-keygen -f cryptoKey.pub -e -m PKCS8 > cryptoKey.public

...

где:

-e экспорт ключа в другой формат (с ключем -m).

Шифруем файл с помощью openssh публичный ключем:

------------------------------------------------

...

openssl rsautl -encrypt -pubin -inkey cryptoKey.public -in message.txt -out EncryptedMessage.txt

...

где:

-rsautl утилита подписи, проверки, шифрования и дешифрования данных с использованием алгоритма RSA;

-encrypt шифрует входные данные с помощью открытого ключа RSA;

-pubin указывает, что входной файл является открытым ключом RSA;

-inkey указывает файл входного ключа, по умолчанию он должен быть закрытым ключом RSA;

-in указывает имя входного файла для чтения данных или стандартный ввод, если этот параметр не указан;

-out указывает имя выходного файла для записи или стандартный вывод по умолчанию.

Расшифровываем файл с помощью openssl приватным ключем:

-------------------------------------------------------

...

openssl rsautl -decrypt -inkey cryptoKey.private -in EncryptedMessage.txt -out DecryptedMessage.txt

...

где:

-decrypt расшифровывает входные данные с помощью закрытого ключа RSA.

